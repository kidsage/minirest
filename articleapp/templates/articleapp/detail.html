{% extends 'base.html' %}
{% load django_bootstrap5 %}

{% block content %}

<div style="text-align: center; max-width: 1200px; margin: 4rem auto;">
    <div style="width: 700px; border-radius: 1rem; float: left;" >
        <img src="{{ target_article.image.url }}" alt="">
    </div>
    <div class="text-start" style="width: 500px; padding: 20px; float: right;">
        <h1>{{ target_article.title }}</h1>
        <img src="{{ target_user.profile.image.url }}" alt="" style="height: 10rem; width: 10rem; border-radius: .8rem; margin-bottom: 3rem; object-fit: cover;">
        <h5>{{ target_article.writer.profile.nickname }}</h5>
        <div >{{ target_article.content | safe }}</div>
        <div>
            {% if target_article.writer == user %}
            <a href="{% url 'articleapp:update' pk=target_article.pk %}" class="btn btn-dark btn-sm rounded-pill">
                수정
            </a>
            <a href="{% url 'articleapp:delete' pk=target_article.pk %}" class="btn btn-danger btn-sm rounded-pill">
                삭제
            </a>
            {% endif %}
        </div>
    </div>
    <div style="clear: both;"></div>
    <br><br>
    <div style="text-align: center; height: 2rem;">
        <a href="{% url 'articleapp:like' pk=target_article.pk %}">
            <i style="vertical-align: middle; font-size: 1.2rem; color: red;" class="material-icons">favorite</i>
        </a>
        <span style="text-align: left; font-size: 1.2rem;">
            {{ target_article.liked_user.first }} 님 포함 {{ target_article.liked_user.count }}명이 이 게시물을 좋아합니다.
        </span>
    </div>
    <br>
    <!-- TAGGIT PART -->
    <div style="max-width: 600px; margin: auto;">
        <i class="fas fa-tags" aria-hidden="true"></i>&nbsp; 태그:
        {% load taggit_templatetags2_tags %}
        {% get_tags_for_object object as "tags" %}
        {% for tag in tags %}
            <a href="{% url 'articleapp:tagged_object_list' tag.name %}" class="badge badge-light">
                {{ tag.name }}
            </a>
        {% endfor %}
        &emsp;
        <a href="{% url 'articleapp:tag_cloud' %}">
            <button class="btn btn-light btn-sm rounded-pill">tagcloud</button>
        </a>
    </div>
    <br>
    <div style="max-width: 600px; margin: auto;">
        {% for comment in target_article.comment.all %}
            {% include 'commentapp/detail.html' with comment=comment %}
        {% endfor %}
        {% include 'commentapp/create.html' with article=target_article %}
    </div>
</div>


{% endblock %}